/*! jQuery Element Diff - v0.1.0 - 2013-08-31
 * https://github.com/ngs/jquery-elementDiff
 * Copyright (c) 2013 Atsushi Nagase; Licensed MIT */
!function(){!function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return d=window.console,l=a.map,g=a.extend,i=a.inArray,m=a.merge,f=function(a){return g({},a)},j=function(a){var b;if(!a||"object"!=typeof a)return!1;for(b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0},c=/^(string|number|boolean)$/,k=function(a){return!a||c.test(typeof a)||a instanceof Array},e=function(a,b){var c,d,h,i,l;a=f(a),b=f(b),c={};for(d in a)i=a[d],l=b[d],delete b[d],k(l)?l!==i&&(c[d]=l):"object"==typeof l?(h=e(i,l),j(h)||(c[d]=h)):c[d]=null;return g(c,b)},h=function(a,b,c){var d,e;null==b&&(b={}),null==c&&(c=null);for(d in a)e=a[d],"_"===d?d=c:c&&(d=""+c+"-"+d),k(e)?b[d]=e:h(e,b,d);return b},b=function(){function b(a,b){"undefined"==typeof b&&(b=a.selector),this.element=a,this.selector=b}return b.prototype.toString=function(){return"[ElementDiff: "+(this.selector||this.element[0])+"]"},b.diffObjects=e,b.isEmptyObject=j,b.flattenAttributes=h,b.prototype.generateCode=function(a){var b,c;return b=m([],arguments).slice(1),c=l(b,function(a){return JSON.stringify(a)}).join(","),""+a+"("+c+")"},b.prototype.diffAttributes=function(b){var c,d,f,g,i;b=a(b),c=this.element.attr(),d=b.attr(),f=h(e(c,d));for(g in f)i=f[g],void 0===i&&(f[g]=null);return j(f)?[]:[this.generateCode("attr",f)]},b.prototype.diffText=function(b){var c,d,e,f,g,h,i,j;return f=this.element,b=a(b),c=f.children(),d=b.children(),g=c.size(),h=d.size(),i=f.text(),j=b.text(),e=[],0===h&&i!==j?(g>0&&e.push(this.generateCode("empty")),e.push(this.generateCode("text",j)),e):e},b.prototype.isSameTag=function(b){return this.element.prop("nodeName")===a(b).prop("nodeName")},b.prototype.getDiff=function(b){var c,d,e,f;return f=this.element,b=a(b),b&&b.size()?(d=[],this.isSameTag(b)?(m(d,this.diffAttributes(b)),m(d,this.diffText(b))):(e=a("<div />").append(b.clone()),d.push(this.generateCode("replaceWith",e.html()))),d.length?(c=d.join("."),this.selector?['$("'+this.selector+'").'+c]:[c]):[]):[]},b.prototype.getDiffRecursive=function(b){var c,e,f,g,h,i;return g=this.element,b=a(b),f=this.getDiff(b),c=g.children(),e=b.children(),h=c.size(),i=e.size(),e.each(function(a,b){return d.log(a,b)}),1},b}(),a.elementDiff=b,a.fn.elementDiff=function(a){return new b(this,a)},a.fn.getElementDiff=function(a,b){return this.elementDiff(b).getDiff(a)},this}(jQuery)}.call(this);